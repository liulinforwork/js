<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>map.reduce</title>
</head>
<body>
    <script type="text/javascript" charset="utf-8">
        'use strict';

        console.log('demo start...');

        // http://research.google.com/archive/mapreduce.html Google的那篇大名鼎鼎的论文 明白map/reduce的概念。

        // map
        var arr1 = [1,2,3,4,5,6,7,8,9];
        var func1 = function (x) {
            return x*x;
        };
        console.log(arr1.map(func1));
        console.log(arr1.map(String));

        // reduce 累加 累乘
        var arr2 = [1,2,3,4,5,6,7,8,9];
        var func2 = function (x,y) {
            console.log(x);
            console.log(y);
            console.log(x*y);
            console.log('结果上方---------------------------');
            return x*y;
        };
        console.log(arr2.reduce(func2));

        function product(arr) {
            var func3 = function (x,y) {
                console.log(x*y);
                return x*y;
            };
            return arr.reduce(func3);
        }
        // 测试:
        if (product([1, 2, 3, 4]) === 24 && product([0, 1, 2]) === 0 && product([99, 88, 77, 66]) === 44274384) {
            console.log('测试通过!');
        }
        else {
            console.log('测试失败!');
        }

        var arr4 = [1, 3, 5, 7, 9];
        console.log(arr4.reduce(function (x, y) {
            return x * 10 + y;
        }));  // 13579

        //如果我们继续改进这个例子，想办法把一个字符串13579先变成Array——[1, 3, 5, 7, 9]，再利用reduce()就可以写出一个把字符串转换为Number的函数。
        //练习：不要使用JavaScript内置的parseInt()函数，利用map和reduce操作实现一个string2int()函数：


        console.log("练习1");
        function string2int(string) {

//            //1.把字符串转换成array
//            var arr1 = [];
//            arr1.map(func5)
//
//            string = '12300';
//            var func5 = function (string) {
//                return
//            }

            //2.把数组转换成Number
            var arr2 = [1,2,3,0,0];
            arr2.reduce(function (x,y) {
                console.log(x);
                console.log(y);
                console.log('结果---------------------------');
                console.log(x * 10 + y);
                return x * 10 + y;
            })
        }
        // 测试:
        if (string2int('0') === 0 && string2int('12345') === 12345 && string2int('12300') === 12300) {
            if (string2int.toString().indexOf('parseInt') !== -1) {
                console.log('请勿使用parseInt()!');
            } else if (string2int.toString().indexOf('Number') !== -1) {
                console.log('请勿使用Number()!');
            } else {
                console.log('测试通过!');
            }
        }
        else {
            console.log('测试失败!');
        }


        console.log("练习2");
        // 利用map()把字符串变成整数
        var arr10 = ['1', '2', '3'];
        var r;
        r = arr10.map(parseInt);
        console.log('[' + r[0] + ', ' + r[1] + ', ' + r[2] + ']');


        console.log('demo end ...');

    </script>
</body>
</html>